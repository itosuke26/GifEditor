# GIF編集ツール

GIF編集ツールは、動画ファイル（MKV, MP4）からGIFアニメーションを作成・編集するためのツールです。

## 機能

* 動画ファイル（MKV, MP4）からGIFアニメーションへの変換
* GIFアニメーションのフレームレート調整
* GIFアニメーションのカラーパレット最適化
* GIFアニメーションの切り抜き
* GIFアニメーションのリサイズ
* GIFアニメーションのファイルサイズ削減
* GIFアニメーションの画像ファイルへの出力

## 必要な環境

* [.NET Desktop Runtime 9.0](https://dotnet.microsoft.com/en-us/download/dotnet/9.0)
* [FFmpeg](https://ffmpeg.org/download.html)（インストールパスを環境変数`PATH`に追加してください）

## インストール手順

### Visual Studio 2022 のインストール

1.  [Visual Studio 2022 Community](https://visualstudio.microsoft.com/ja/vs/community/) にアクセスし、インストーラーをダウンロードします。
2.  インストーラーを起動し、「.NET デスクトップ開発」ワークロードを選択してインストールします。

### FFmpeg のインストールと環境変数 PATH の設定

1.  [FFmpeg](https://ffmpeg.org/download.html) にアクセスし、Windows 用のビルドをダウンロードします。
2.  ダウンロードした zip ファイルを [7-Zip](https://www.7-zip.org/) などの解凍ソフトで展開し、任意の場所に保存します。（例: `C:\ffmpeg`）
3.  Windows の検索バーで「環境変数」と入力し、「システム環境変数の編集」を開きます。
4.  「環境変数」ボタンをクリックし、「システム環境変数」の「Path」を選択して「編集」をクリックします。
5.  「新規」をクリックし、FFmpeg の `bin` フォルダのパスを追加します。（例: `C:\ffmpeg\bin`）
6.  「OK」をクリックしてウィンドウを閉じ、変更を保存します。
7.  コマンドプロンプトを開き、「`ffmpeg -version`」と入力して FFmpeg が正しくインストールされたことを確認します。

## 使用方法

1.  アプリケーションを起動します。
2.  「GIF編集」タブで、GIFアニメーションファイルを読み込み、必要な編集操作を行います。
3.  「動画変換」タブで、動画ファイル（MKV, MP4）を読み込み、GIFアニメーションに変換します。
4.  「画像処理」タブで、GIFアニメーションを読み込み、画像ファイルへと出力します。

## 詳細な使用方法

### ファイルの選択

* 各タブの「ファイル選択」ボタンをクリックし、ファイルを選択します。
* ファイルパスがテキストボックスに表示されます。

### GIF編集タブ

* **フレームレート (FPS):** テキストボックスにフレームレートを入力し、「FPS,カラーパレット最適化」ボタンをクリックします。
* **カラーパレット最適化:** チェックボックスをオンにし、「FPS,カラーパレット最適化」ボタンをクリックします。
* **リサイズ:** 幅と高さをテキストボックスに入力し、「GIFリサイズ」ボタンをクリックします。
* **サイズ圧縮:** 目標サイズをテキストボックスに入力し、「GIFサイズ圧縮」ボタンをクリックします。
* **切り抜き:** X, Y 座標、幅、高さをテキストボックスに入力し、「GIFを切り抜く」ボタンをクリックします。

### 動画変換タブ

* **MKV → MP4 変換:** MKV ファイルを選択し、「MKV → MP4 変換」ボタンをクリックします。
* **MP4 → GIF 変換:** MP4 ファイルを選択し、「MP4 → GIF 変換」ボタンをクリックします。
* **GIF → MP4 変換:** GIF ファイルを選択し、「GIF → MP4 変換」ボタンをクリックします。

### 画像処理タブ

* **リサイズ:** 幅と高さをテキストボックスに入力し、「GIFリサイズ」ボタンをクリックします。
* **出力画像形式:** コンボボックスで出力形式を選択し、「最初のフレームを変換」ボタンをクリックします。

## デバッグとビルド

### デバッグ

1.  Visual Studio 2022 でプロジェクトを開きます。
2.  ツールバーの「デバッグ」ボタンをクリックするか、F5 キーを押します。

### ビルド

1.  Visual Studio 2022 でプロジェクトを開きます。
2.  メニューバーの「ビルド」→「ソリューションのビルド」を選択します。
3.  ビルドが成功すると、`bin\Debug` または `bin\Release` フォルダに実行ファイルが生成されます。

### exe ファイルへの出力

1.  Visual Studio 2022 でプロジェクトを開きます。
2.  ソリューションエクスプローラーでプロジェクトを右クリックし、「発行」を選択します。
3.  「フォルダー」を選択し、「次へ」をクリックします。
4.  出力先のフォルダーを選択し、「完了」をクリックします。
5.  「発行」ボタンをクリックします。
6.  指定したフォルダーに exe ファイルが生成されます。

## 開発環境

* [Visual Studio 2022 Community](https://visualstudio.microsoft.com/ja/vs/community/)
* [.NET 9.0 SDK](https://dotnet.microsoft.com/en-us/download/dotnet/9.0)

### NuGet パッケージのインストール

1.  Visual Studio 2022 でプロジェクトを開きます。
2.  メニューバーの「ツール」→「NuGet パッケージ マネージャー」→「ソリューションの NuGet パッケージの管理」を選択します。
3.  「参照」タブでパッケージを検索し、インストールします。

### 拡張機能

* 必要に応じて、Visual Studio Marketplace から拡張機能をインストールします。

## 依存ライブラリ

* [Magick.NET-Q16-AnyCPU](https://www.nuget.org/packages/Magick.NET-Q16-AnyCPU/) (ライセンス: [Magick.NETライセンス](https://magick.codeplex.com/license))
* [Magick.NET.Core](https://www.nuget.org/packages/Magick.NET.Core/) (ライセンス: [Magick.NETライセンス](https://magick.codeplex.com/license))
* [Xabe.FFmpeg](https://www.nuget.org/packages/Xabe.FFmpeg/) (ライセンス: [MIT License](https://github.com/tomaszzmuda/Xabe.FFmpeg/blob/master/LICENSE))

## 生成AIによるコード生成

本プロジェクトの一部コードは、以下の生成AIによって生成されています。

* ChatGPT
* Gemini
* Copilot

生成されたコードは、必要に応じて修正および調整されています。

## OBS Studio連携

OBS Studioで録画したファイルをGIFアニメーションに変換し、UnityRoomにアップロードすることで、ゲームプレイ動画などを簡単に共有できます。

* [OBS Studio](https://obsproject.com/ja)

## ライセンス

このソフトウェアは、MITライセンスの下で公開されています。

## 開発者

itosuke26

## トラブルシューティング

### FFmpeg が認識されない場合

* 環境変数 `PATH` に FFmpeg の `bin` フォルダが正しく追加されているか確認してください。
* コマンドプロンプトを再起動して、環境変数の変更を反映させてください。
* PC を再起動して、環境変数の変更を反映させてください。

### GIF アニメーションの画質が悪い場合

* フレームレートやカラーパレットの設定を調整してください。
* リサイズやサイズ圧縮の設定を調整してください。
* 元動画の画質を確認してください。

### 変換に時間がかかる場合

* 動画の解像度やフレームレートが高いと、変換に時間がかかります。
* PC のスペックが低いと、変換に時間がかかります。
* 他のアプリケーションを閉じて、PC の負荷を軽減してください。

## 今後の開発予定

* 変換中のキャンセル機能の追加
* 出力先の選択機能の追加
* UI の改善
* エラーハンドリングの強化
* ログ出力機能の追加
* その他の機能追加

## 貢献

バグ報告や機能提案など、貢献をお待ちしております。

## 連絡先

itosuke26